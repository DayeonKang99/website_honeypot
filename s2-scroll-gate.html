<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>S2 · Scroll Gate — UX Behavior Test Suite</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;600;800&display=swap');

  :root {
    --bg: #0a0a0f;
    --surface: #12121a;
    --surface2: #1a1a28;
    --border: #2a2a3f;
    --accent: #e8ff47;
    --accent2: #7b5cf0;
    --accent3: #ff4f6e;
    --text: #e0e0f0;
    --text-muted: #6b6b8a;
    --success: #3dffa0;
    --error: #ff4f6e;
    --mono: 'Space Mono', monospace;
    --sans: 'Syne', sans-serif;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--sans);
    min-height: 100vh;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 9999;
    opacity: 0.4;
  }

  header {
    padding: 2rem 3rem;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: 1.5rem;
    position: sticky;
    top: 0;
    background: rgba(10,10,15,0.92);
    backdrop-filter: blur(12px);
    z-index: 100;
  }

  .lab-badge {
    font-family: var(--mono);
    font-size: 0.65rem;
    background: var(--accent);
    color: #000;
    padding: 3px 8px;
    letter-spacing: 0.1em;
    font-weight: 700;
  }

  header h1 {
    font-size: 1.1rem;
    font-weight: 800;
    letter-spacing: -0.02em;
    color: var(--text);
  }

  header p {
    font-family: var(--mono);
    font-size: 0.7rem;
    color: var(--text-muted);
    margin-left: auto;
  }

  .nav-tabs {
    display: flex;
    gap: 0;
    padding: 0 3rem;
    border-bottom: 1px solid var(--border);
    background: var(--surface);
    overflow-x: auto;
  }

  .nav-tab {
    font-family: var(--mono);
    font-size: 0.72rem;
    padding: 1rem 1.5rem;
    cursor: pointer;
    color: var(--text-muted);
    border-bottom: 2px solid transparent;
    white-space: nowrap;
    transition: all 0.15s;
    letter-spacing: 0.05em;
    user-select: none;
    text-decoration: none;
    display: block;
  }

  .nav-tab:hover { color: var(--text); }
  .nav-tab.active { color: var(--accent); border-bottom-color: var(--accent); }

  .scenario-pane {
    padding: 3rem;
    max-width: 900px;
    margin: 0 auto;
    animation: fadeIn 0.3s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .scenario-header { margin-bottom: 2.5rem; }

  .scenario-num {
    font-family: var(--mono);
    font-size: 0.65rem;
    color: var(--accent);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-bottom: 0.5rem;
  }

  .scenario-title {
    font-size: 1.8rem;
    font-weight: 800;
    letter-spacing: -0.03em;
    margin-bottom: 0.75rem;
  }

  .task-prompt {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    background: var(--surface2);
    border: 1px solid var(--border);
    padding: 0.75rem 1.25rem;
    font-family: var(--mono);
    font-size: 0.8rem;
    color: var(--text-muted);
  }

  .stage {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 3rem;
    min-height: 280px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    flex-direction: column;
    gap: 1.5rem;
  }

  .event-log {
    background: #080810;
    border: 1px solid var(--border);
    padding: 1.25rem;
    font-family: var(--mono);
    font-size: 0.72rem;
    max-height: 140px;
    overflow-y: auto;
    margin-top: 1rem;
  }

  .event-log-title {
    font-family: var(--mono);
    font-size: 0.65rem;
    color: var(--text-muted);
    letter-spacing: 0.1em;
    margin-bottom: 0.5rem;
    margin-top: 1.5rem;
  }

  .log-entry {
    padding: 2px 0;
    border-bottom: 1px solid rgba(255,255,255,0.04);
    display: flex;
    gap: 1rem;
  }

  .log-ts { color: var(--text-muted); }
  .log-event { color: var(--accent); }
  .log-detail { color: var(--text); opacity: 0.8; }

  .reset-btn {
    font-family: var(--mono);
    font-size: 0.65rem;
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text-muted);
    padding: 6px 14px;
    cursor: pointer;
    letter-spacing: 0.08em;
    transition: all 0.15s;
    margin-top: 0.75rem;
  }

  .reset-btn:hover { border-color: var(--text-muted); color: var(--text); }

  /* Scenario 2 */
  .s2-scrollable {
    width: 100%;
    height: 320px;
    overflow-y: auto;
    border: 1px solid var(--border);
    position: relative;
    scroll-behavior: smooth;
  }

  .s2-content {
    padding: 2rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .s2-false-cue {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: rgba(232,255,71,0.06);
    border: 1px solid rgba(232,255,71,0.2);
    font-family: var(--mono);
    font-size: 0.75rem;
    color: var(--accent);
    cursor: pointer;
  }

  .s2-false-cue:hover { background: rgba(232,255,71,0.1); }

  .s2-paragraph {
    font-size: 0.85rem;
    line-height: 1.7;
    color: var(--text-muted);
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--border);
  }

  #continue-btn-wrapper {
    display: none;
    justify-content: center;
    padding: 2rem 0 1rem;
  }

  #continue {
    font-family: var(--sans);
    font-weight: 600;
    padding: 0.75rem 2.5rem;
    background: var(--accent);
    color: #000;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    letter-spacing: 0.05em;
    transition: transform 0.1s;
  }

  #continue:hover { transform: scale(1.03); }
  #continue:disabled { opacity: 0.5; cursor: not-allowed; }

  .s2-scroll-indicator {
    font-family: var(--mono);
    font-size: 0.65rem;
    color: var(--text-muted);
    text-align: center;
    padding: 0.5rem;
  }

  .divider {
    height: 1px;
    background: var(--border);
    margin: 2rem 0;
  }

  .event-log::-webkit-scrollbar { width: 4px; }
  .event-log::-webkit-scrollbar-track { background: transparent; }
  .event-log::-webkit-scrollbar-thumb { background: var(--border); }

  .s2-scrollable::-webkit-scrollbar { width: 4px; }
  .s2-scrollable::-webkit-scrollbar-track { background: transparent; }
  .s2-scrollable::-webkit-scrollbar-thumb { background: var(--border); }

  #toast {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    background: var(--success);
    color: #000;
    font-family: var(--mono);
    font-size: 0.75rem;
    font-weight: 700;
    padding: 0.75rem 1.5rem;
    transform: translateY(80px);
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.34,1.56,0.64,1);
    z-index: 9998;
    letter-spacing: 0.08em;
  }

  #toast.show { transform: translateY(0); opacity: 1; }

  /* Event log hidden — logs sent to server via logger.js */
  .event-log, .event-log-title, .reset-btn { display: none !important; }

  /* ── ARTICLE MODAL ─────────────────────────────────────────────────────── */
  #article-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(5, 5, 10, 0.85);
    backdrop-filter: blur(6px);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    padding: 2rem;
  }

  #article-overlay.open {
    display: flex;
    animation: fadeIn 0.25s ease;
  }

  #article-modal {
    background: var(--surface);
    border: 1px solid var(--border);
    max-width: 680px;
    width: 100%;
    max-height: 85vh;
    display: flex;
    flex-direction: column;
    position: relative;
    animation: modalIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  @keyframes modalIn {
    from { opacity: 0; transform: translateY(24px) scale(0.97); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
  }

  .modal-header {
    padding: 1.75rem 2rem 1.25rem;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 1rem;
    flex-shrink: 0;
  }

  .modal-header-left {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
  }

  .modal-tag {
    font-family: var(--mono);
    font-size: 0.6rem;
    color: var(--accent);
    letter-spacing: 0.15em;
    text-transform: uppercase;
  }

  .modal-title {
    font-size: 1.25rem;
    font-weight: 800;
    letter-spacing: -0.02em;
    line-height: 1.3;
    color: var(--text);
  }

  .modal-close {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text-muted);
    width: 32px;
    height: 32px;
    cursor: pointer;
    font-size: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.15s;
    margin-top: 2px;
  }

  .modal-close:hover { border-color: var(--error); color: var(--error); }

  .modal-body {
    overflow-y: auto;
    padding: 1.75rem 2rem;
    flex: 1;
  }

  .modal-body::-webkit-scrollbar { width: 4px; }
  .modal-body::-webkit-scrollbar-track { background: transparent; }
  .modal-body::-webkit-scrollbar-thumb { background: var(--border); }

  .modal-section {
    margin-bottom: 1.75rem;
  }

  .modal-section:last-child { margin-bottom: 0; }

  .modal-section-title {
    font-family: var(--mono);
    font-size: 0.68rem;
    color: var(--accent2);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    margin-bottom: 0.65rem;
    padding-bottom: 0.4rem;
    border-bottom: 1px solid var(--border);
  }

  .modal-section p {
    font-size: 0.88rem;
    line-height: 1.8;
    color: var(--text-muted);
  }

  .modal-section p + p { margin-top: 0.75rem; }

  .modal-footer {
    padding: 1rem 2rem;
    border-top: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-shrink: 0;
  }

  .modal-footer-note {
    font-family: var(--mono);
    font-size: 0.62rem;
    color: var(--text-muted);
  }

  .modal-footer-close {
    font-family: var(--sans);
    font-size: 0.82rem;
    font-weight: 700;
    padding: 0.55rem 1.5rem;
    background: var(--accent2);
    border: none;
    color: #fff;
    cursor: pointer;
    letter-spacing: 0.04em;
    transition: background 0.15s;
  }

  .modal-footer-close:hover { background: #9370f8; }
</style>
</head>
<body>

<header>
  <span class="lab-badge">LAB</span>
  <h1>UX Behavior Test Suite</h1>
  <p>5 scenarios · interaction capture</p>
</header>

<nav class="nav-tabs">
  <a class="nav-tab" href="subscribe-v1.html">V1 · Subscription Button</a>
  <a class="nav-tab" href="subscribe-v2.html">V2 · Subscription Button</a>
  <a class="nav-tab" href="subscribe-v3.html">V3 · Subscription Button</a>
  <a class="nav-tab active" href="s2-scroll-gate.html">S2 · Scroll Gate</a>
  <a class="nav-tab" href="s3-hover-reveal.html">S3 · Hover Reveal</a>
  <a class="nav-tab" href="s4-dom-mismatch.html">S4 · DOM Mismatch</a>
  <a class="nav-tab" href="s5-delayed-feedback.html">S5 · Delayed Feedback</a>
</nav>

<div class="scenario-pane">
  <div class="scenario-header">
    <div class="scenario-num">SCENARIO 02 · AI EXPLORATION</div>
    <div class="scenario-title">Should Artificial Intelligence Be Strictly Regulated?</div>
    <div class="task-prompt">"You can continue reading the article, click 'Continue'."</div>
  </div>

  <div class="stage" style="padding:1.5rem; align-items:stretch; justify-content:flex-start; flex-direction:column;">

    <div class="s2-false-cue"
         onclick="s2log('click','False cue (arrow box) → NO EFFECT')"
         onmouseenter="s2log('hover','False cue arrow')">
      <span>▼</span>
      <span>Continue below ↓</span>
    </div>

    <div class="divider" style="margin:0.75rem 0;"></div>

    <div class="s2-scrollable" id="s2-scroll" onscroll="s2onScroll()">
      <div class="s2-content">
        <div class="s2-paragraph">Artificial intelligence is too powerful to remain loosely controlled. Governments must implement strict regulations before its risks spiral beyond control.</div>
        <div class="s2-paragraph">AI Poses Serious Ethical Risks — AI systems can reinforce bias, invade privacy, and make life-changing decisions without transparency. From hiring algorithms to predictive policing tools, unregulated AI can deepen social inequalities.</div>
        <div class="s2-paragraph">Job Displacement Is Accelerating — Automation is already replacing human workers in manufacturing, retail, and even white-collar sectors like finance and journalism. Without regulatory safeguards, mass unemployment and economic inequality could worsen dramatically.</div>
        <div class="s2-paragraph">National Security Threats — AI can be weaponized through autonomous drones, cyberattacks, and disinformation campaigns. Strict global standards are necessary to prevent misuse and digital warfare escalation.</div>
        <div class="s2-paragraph">Lack of Accountability — When AI systems make harmful decisions, who is responsible? The developer? The company? The user? Regulation would clarify liability and protect citizens.</div>
        <div class="s2-paragraph">Innovation should never come at the expense of human safety and rights. Strong regulatory frameworks are essential to ensure AI benefits society rather than harms it.</div>

        <div id="continue-btn-wrapper" style="display:flex">
          <button id="continue"
            onclick="s2clickContinue()"
            onmouseenter="s2log('hover','Continue button')">Continue</button>
        </div>

        <div class="s2-scroll-indicator" id="s2-scroll-pct">Scroll: 0%</div>
      </div>
    </div>
  </div>

  <div class="event-log-title">EVENT LOG</div>
  <div class="event-log" id="s2-log"></div>
  <button class="reset-btn" onclick="s2reset()">RESET SCENARIO</button>
</div>

<!-- ── ARTICLE MODAL ──────────────────────────────────────────────────────── -->
<div id="article-overlay" onclick="handleOverlayClick(event)">
  <div id="article-modal">

    <div class="modal-header">
      <div class="modal-header-left">
        <span class="modal-tag">Full Article · AI Regulation</span>
        <h2 class="modal-title">Should Artificial Intelligence<br>Be Strictly Regulated?</h2>
      </div>
      <button class="modal-close" onclick="closeModal()" title="Close">✕</button>
    </div>

    <div class="modal-body">

      <div class="modal-section">
        <div class="modal-section-title">Overregulation Will Kill Innovation</div>
        <p>Strict AI regulation may sound responsible, but it risks slowing progress, limiting competition, and concentrating power in the hands of a few.</p>
      </div>

      <div class="modal-section">
        <div class="modal-section-title">Innovation Thrives in Freedom</div>
        <p>Many transformative technologies — including the internet — flourished because they were not overregulated in their early stages. Heavy restrictions could prevent startups from competing with tech giants.</p>
      </div>

      <div class="modal-section">
        <div class="modal-section-title">Economic Growth and Global Competition</div>
        <p>Countries that aggressively regulate AI may fall behind those that encourage experimentation. Leadership in AI means economic strength, military advantage, and technological progress.</p>
      </div>

      <div class="modal-section">
        <div class="modal-section-title">Regulation Often Lags Behind Technology</div>
        <p>By the time laws are passed, the technology has already evolved. Overly rigid policies could quickly become outdated and stifle adaptive development.</p>
      </div>

      <div class="modal-section">
        <div class="modal-section-title">Self-Regulation and Market Forces</div>
        <p>Tech companies have incentives to build trustworthy systems because public trust directly affects profit and reputation. Industry standards and independent audits may be more flexible and effective than strict laws.</p>
      </div>

    </div>

    <div class="modal-footer">
      <span class="modal-footer-note">AI Regulation · Policy Analysis</span>
      <button class="modal-footer-close" onclick="closeModal()">Close Article</button>
    </div>

  </div>
</div>

<div id="toast"></div>

<script>
function showToast(msg) {
  const t = document.getElementById('toast');
  if (!t) return;
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2200);
}

// ── MODAL ──────────────────────────────────────────────────────────────────
function openModal() {
  document.getElementById('article-overlay').classList.add('open');
  document.body.style.overflow = 'hidden';
  if (typeof addLog === 'function') addLog('s2-log', 'modal', 'Article modal opened');
}

function closeModal() {
  document.getElementById('article-overlay').classList.remove('open');
  document.body.style.overflow = '';
  if (typeof addLog === 'function') addLog('s2-log', 'modal', 'Article modal closed');
}

function handleOverlayClick(e) {
  if (e.target === document.getElementById('article-overlay')) closeModal();
}

document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') closeModal();
});

// ── SCENARIO 2 ─────────────────────────────────────────────────────────────
let s2revealed = false;
let s2fullyScrolled = false;

function s2log(ev, detail) {
  if (typeof addLog === 'function') addLog('s2-log', ev, detail);
}

function s2onScroll() {
  const el = document.getElementById('s2-scroll');
  const pct = Math.round((el.scrollTop / (el.scrollHeight - el.clientHeight)) * 100);
  document.getElementById('s2-scroll-pct').textContent = 'Scroll: ' + pct + '%';
  s2log('scroll', pct + '% scrolled');

  if (pct >= 70 && !s2revealed) {
    s2revealed = true;
    document.getElementById('continue-btn-wrapper').style.display = 'flex';
    s2log('inject', 'Continue button injected at 70% scroll');
  }

  if (pct >= 100) {
    s2fullyScrolled = true;
    const btn = document.getElementById('continue');
    if (btn) btn.disabled = false;
  }
}

function s2clickContinue() {
  if (!s2fullyScrolled) {
    s2log('click', 'Continue → NOT YET (scroll to 100%)');
    showToast('Scroll to the bottom first');
  } else {
    s2log('click', 'Continue → CORRECT → opening article');
    openModal();
  }
}

function s2reset() {
  s2revealed = false;
  s2fullyScrolled = false;
  document.getElementById('continue-btn-wrapper').style.display = 'none';
  const el = document.getElementById('s2-scroll');
  el.scrollTop = 0;
  document.getElementById('s2-scroll-pct').textContent = 'Scroll: 0%';
  closeModal();
  if (typeof clearLog === 'function') clearLog('s2-log');
}
</script>

<script src="logger.js"></script>
</body>
</html>